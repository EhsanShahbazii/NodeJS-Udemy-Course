1
00:00:02,250 --> 00:00:08,190
در پروژه ما همانطور که در سخنرانی های قبلی ذکر کردم، ما قبلاً نظراتی را دریافت کرده ایم و آن را ترک می کنیم

2
00:00:08,190 --> 00:00:09,930
دقیقا در حالتی که هست

3
00:00:09,930 --> 00:00:14,430
ما آن پوشه views را با تمام الگوهای خود در داخل آنها داریم.

4
00:00:14,430 --> 00:00:22,140
حالا چیزی که کم است پوشه ای برای کنترلرها و خود کنترلرها و مدل هاست.

5
00:00:22,620 --> 00:00:30,030
در حال حاضر همه این موارد در فایل‌های مسیر ما یا توابع مسیر ما در اینجا مخلوط شده است، روشی که ما مسیریابی می‌کنیم اینطور نیست

6
00:00:30,030 --> 00:00:30,710
تغییر دادن،

7
00:00:30,720 --> 00:00:36,960
ما از روتر استفاده می کنیم و چنین تابع میان افزاری داریم اما در واقع منطقی که در اینجا اجرا می شود

8
00:00:37,200 --> 00:00:43,230
این منطق کنترل کننده معمولی است، ما در حال تعامل با داده های خود هستیم حتی اگر این فقط یک خط باشد

9
00:00:43,230 --> 00:00:44,330
اینجا اما هنوز

10
00:00:44,610 --> 00:00:50,510
و سپس یک نمای را برمی گردانیم و این دقیقاً همین منطق میانی است که یک کنترلر را می سازد.

11
00:00:50,760 --> 00:00:56,840
بنابراین مطمئناً می توانید بگویید که ما قبلاً کنترل کننده هایی داریم، این دو فایل کنترل کننده ما را نگه می دارند

12
00:00:56,850 --> 00:00:58,910
منطقی و شما درست می گویید

13
00:00:59,070 --> 00:01:05,070
اما اگر همه چیز را در فایل‌های مسیر خود قرار دهید، به‌ویژه زمانی که برنامه ما رشد می‌کند، این کار به سرعت انجام می‌شود

14
00:01:05,070 --> 00:01:11,580
تبدیل شدن به یک فایل بسیار بزرگ و بنابراین جدا کردن آن به فایل های جداگانه می تواند ایده خوبی باشد زیرا

15
00:01:11,580 --> 00:01:16,320
سپس می‌توانید به سرعت ببینید کدام مسیرها را دارید و اگر می‌خواهید کدی را که در هر مسیر اجرا می‌شود، ببینید.

16
00:01:16,530 --> 00:01:20,690
شما به سادگی وارد فایل و تابع کنترلر مربوطه می شوید.

17
00:01:21,060 --> 00:01:24,590
بنابراین بیایید یک پوشه جدید در اینجا ایجاد کنیم و نام آن را بگذاریم

18
00:01:24,660 --> 00:01:26,820
کنترلرها، مانند این

19
00:01:27,010 --> 00:01:33,270
اکنون در آن پوشه کنترلرها، برای عملکردهایی که دارم، کنترلرهایی ایجاد خواهم کرد.

20
00:01:33,270 --> 00:01:41,430
اکنون می توانید یک نقشه برداری یک به یک بین نام فایل مسیر و شماره فایل مسیر و کنترلر خود داشته باشید

21
00:01:41,430 --> 00:01:44,400
فایل‌ها، اما شما همچنین می‌توانید این را به روش دیگری تقسیم کنید،

22
00:01:44,610 --> 00:01:50,060
شاید بخواهید مسیرهای خود را بر اساس پیشوند گروه بندی کنید، مانند اینجا،

23
00:01:50,070 --> 00:01:52,200
اینها همه مسیرهای مدیریت ما هستند

24
00:01:52,200 --> 00:01:56,760
اما چیزی که شما در آنجا اجرا می کنید ممکن است با دو کنترلر مختلف مطابقت داشته باشد.

25
00:01:56,760 --> 00:02:03,120
فرض کنید مسیرهای مدیریتی دارید که به شما امکان می دهد پروفایل کاربری و محصولات مدیریت خود را تغییر دهید

26
00:02:03,120 --> 00:02:09,210
همه این مسیرها را در فایل admin.js در پوشه routes داشته باشید، اما شما دو کنترلر مختلف دارید،

27
00:02:09,510 --> 00:02:14,330
کنترل کننده کاربران یا کنترل کننده مدیریت و کنترل کننده محصول.

28
00:02:14,340 --> 00:02:18,050
بنابراین این به شما بستگی دارد و من واقعاً فایل های مختلفی را در اینجا ایجاد خواهم کرد.

29
00:02:18,120 --> 00:02:27,150
من فایل product.js یا products.js خود را برای منطق مربوط به محصول خود خواهم داشت و همه را قرار می دهم

30
00:02:27,150 --> 00:02:28,650
منطق محصول در آنجا،

31
00:02:28,830 --> 00:02:36,240
بنابراین حتی مسیر فروشگاه من در اینجا که در آن من نیز با محصولات کار می کنم، من آن منطق را در اینجا قرار می دهم زیرا همه منطق هستند

32
00:02:36,270 --> 00:02:39,830
من تا کنون در برنامه خود دارم و این بعداً تغییر خواهد کرد

33
00:02:39,960 --> 00:02:46,110
اما تمام منطق تا کنون به محصولات مربوط می شود و بنابراین، من می خواهم آن را فقط در یک کنترلر داشته باشم

34
00:02:46,110 --> 00:02:53,430
با منطق محصول کار می کند. و اگر بعداً مقداری منطق کاربری اضافه کنم، به یک کنترلر کاربر می رود و شاید

35
00:02:53,430 --> 00:02:59,120
ما حتی کنترل کننده محصول را به یک محصول کاربر و یک کنترل کننده محصول مدیریت تقسیم می کنیم

36
00:02:59,220 --> 00:03:01,490
اما در حال حاضر، ما آن را به این صورت ترک می کنیم.

37
00:03:01,500 --> 00:03:08,890
بنابراین در آن فایل products.js در پوشه کنترلرها، من اکنون می خواهم آن کد را اساساً در اینجا اضافه کنم.

38
00:03:08,890 --> 00:03:11,310
بنابراین این تابع میان افزاری که ما در اینجا اجرا می کنیم،

39
00:03:11,430 --> 00:03:16,380
این کد برای افزودن محصول درست در جایی که من فقط مسیر افزودن محصول را ارائه می کنم،

40
00:03:16,380 --> 00:03:18,470
این اکنون می تواند به آنجا و

41
00:03:18,620 --> 00:03:19,980
سوال فقط این است که چگونه

42
00:03:19,980 --> 00:03:21,680
زیرا این نادرست خواهد بود.

43
00:03:22,110 --> 00:03:28,670
خوب در پایان ما می خواهیم به این تابع پیوند دهیم و می خواهیم از داخل مسیر خود به آنجا پیوند دهیم،

44
00:03:28,710 --> 00:03:32,810
بنابراین در اینجا ما اساساً می خواهیم پیوندی به عملکرد کنترلر در اینجا اضافه کنیم.

45
00:03:32,880 --> 00:03:34,950
بنابراین، ما باید چه کار کنیم؟

46
00:03:35,370 --> 00:03:42,090
ما باید این تابع را در فایل کنترلر محصول صادر کنیم و می توانیم این کار را انجام دهیم و چندین عدد خواهیم داشت

47
00:03:42,090 --> 00:03:44,570
صادرات با استفاده از صادرات

48
00:03:44,670 --> 00:03:46,800
و سپس هر نامی که ما انتخاب کنیم.

49
00:03:46,800 --> 00:03:52,470
به یاد داشته باشید که با این نحو، ما می توانیم چندین صادرات را در یک فایل به راحتی داشته باشیم.

50
00:03:52,530 --> 00:04:02,210
بنابراین در اینجا من اکنون تابع get add product محصول خود را در اینجا صادر می کنم و نام آن به شما بستگی دارد اما من آن را مانند نام گذاری می کنم

51
00:04:02,240 --> 00:04:04,350
زیرا در نهایت این کاری است که ما انجام می دهیم،

52
00:04:04,350 --> 00:04:06,720
صفحه افزودن محصول را دریافت می کنیم.

53
00:04:06,720 --> 00:04:12,300
البته می‌توانید آن را در اینجا دریافت صفحه محصول اضافه کنید، اما من فقط در پایان توضیح می‌دهم که این چه چیزی است

54
00:04:12,300 --> 00:04:16,850
به من کمک می کند تا انجام دهم و به من کمک می کند تا همه چیزهایی را که برای افزودن یک محصول نیاز دارم به دست بیاورم

55
00:04:16,890 --> 00:04:19,580
اما شما می توانید این را به دلخواه خود نام گذاری کنید.

56
00:04:19,690 --> 00:04:25,980
بنابراین اکنون من این محصول را دریافت می‌کنم و هنوز تابع خود را دارم که شی درخواست را دریافت می‌کند

57
00:04:25,980 --> 00:04:33,350
ما در اینجا از آن استفاده نمی‌کنیم، اما هنوز هم آن را دریافت می‌کنیم، شی پاسخی که استفاده می‌کنیم و بعد از آن

58
00:04:33,370 --> 00:04:40,660
این هنوز یک تابع میان‌افزار معمولی است که expressjs آن را می‌فهمد زیرا اکنون get add را وارد می‌کنم

59
00:04:40,710 --> 00:04:45,750
محصول در فایل admin.js من و همچنان از اینجا در مسیر خود استفاده می کنم،

60
00:04:45,750 --> 00:04:46,800
این تغییر نخواهد کرد،

61
00:04:46,860 --> 00:04:51,020
من فقط کدم را متفاوت تقسیم کردم. پس با آن، اجازه دهید

62
00:04:51,070 --> 00:04:52,150
یک واردات اضافه کنید،

63
00:04:52,330 --> 00:04:54,290
به هر حال ما می توانیم از شر این ریشه خلاص شویم

64
00:04:54,310 --> 00:04:57,390
dir import زیرا من دیگر از آن ابزار استفاده نمی کنم،

65
00:04:57,400 --> 00:05:01,410
شما همچنین می توانید کل فایل یا حتی پوشه را حذف کنید

66
00:05:01,420 --> 00:05:03,170
اما این فقط یک نکته جانبی است.

67
00:05:03,370 --> 00:05:09,160
پس بیایید کنترلر خود را وارد کنیم و در آنجا محصولات را وارد کنیم

68
00:05:09,160 --> 00:05:13,370
کنترل کننده با نیاز

69
00:05:17,050 --> 00:05:20,080
پوشه my controllers و در آنجا، فایل محصولات.

70
00:05:20,110 --> 00:05:25,560
بنابراین از آنجایی که من این کار را از داخل فایل admin.js خود در اینجا انجام می دهم، باید یک سطح بالاتر بروم تا زمانی که وارد شوید

71
00:05:25,560 --> 00:05:31,390
پوشه پروژه root و سپس به پوشه کنترلرها می روم و سپس آن فایل محصولات را انتخاب می کنم.

72
00:05:31,690 --> 00:05:37,990
بنابراین در حال حاضر کنترلر محصولات همه توابع صادر شده را بسته‌بندی می‌کند و در حال حاضر، این البته فقط یکی است

73
00:05:38,140 --> 00:05:45,120
اما بیشتر خواهد شد. بنابراین به admin.js در اینجا در این مسیر که می خواهم از آن استفاده کنم، اکنون می توانم به سادگی

74
00:05:45,120 --> 00:05:52,550
بگو محصولات controller.get add product. و ما این تابع را اجرا نمی کنیم

75
00:05:52,630 --> 00:05:55,200
پس لطفا این پرانتزها را اضافه نکنید،

76
00:05:55,270 --> 00:05:58,170
در عوض ما فقط یک مرجع به این تابع ارسال می کنیم.

77
00:05:58,240 --> 00:06:04,360
بنابراین ما فقط می گوییم یا فقط به express، روتر اکسپرس می گوییم که باید این عملکرد را داشته باشد

78
00:06:04,360 --> 00:06:05,310
و آن را ذخیره کنید

79
00:06:05,500 --> 00:06:10,480
و هر گاه درخواستی به این مسیر رسید باید جلو رفته و آن را اجرا کند.

80
00:06:10,480 --> 00:06:13,910
اکنون می توانیم این را برای افزودن یک محصول جدید تکرار کنیم،

81
00:06:13,910 --> 00:06:20,380
من این کد را برش می دهم و به کنترلر محصولم می روم و به سادگی یک صادرات کاملاً جدید اضافه می کنم و نام آن را می گذارم

82
00:06:20,560 --> 00:06:23,660
محصول را اضافه کنید زیرا این کاری است که من اینجا انجام می دهم،

83
00:06:23,680 --> 00:06:30,200
من یک محصول جدید پست می کنم، محصول را از طریق یک مسیر پست اضافه می کنم و این عملکرد خواهد بود

84
00:06:30,220 --> 00:06:31,900
من فقط کپی کردم

85
00:06:31,960 --> 00:06:37,330
اکنون مشکل اینجاست که ما به محصولاتی اشاره می کنیم که البته چیزی است که در آن نداریم

86
00:06:37,360 --> 00:06:43,040
هنوز فایل را ثبت کنید، بنابراین من نیز باید به admin.js بروم و آرایه محصولاتم را که دارم انتخاب کنم

87
00:06:43,080 --> 00:06:48,620
در آنجا، آن را از آنجا خارج کنید و سپس در products.js در فایل کنترلرها،

88
00:06:48,640 --> 00:06:54,290
من این آرایه را اضافه می کنم و بعداً آن را نیز تغییر می دهم، اما در حال حاضر، به سادگی آن را اینجا اضافه می کنیم.

89
00:06:54,490 --> 00:06:57,640
محصولات باید آرایه خالی ما باشند.

90
00:06:57,830 --> 00:07:06,110
اکنون به admin.js بازگشته‌ایم، اکنون می‌توانیم از عملکرد کنترل‌کننده محصولات جدید خود که به تازگی اضافه کرده‌ایم، post add، استفاده کنیم

91
00:07:06,110 --> 00:07:10,340
محصول دقیقاً به همان روشی که ما از get add product استفاده می کنیم

92
00:07:10,520 --> 00:07:13,600
و البته اکنون می‌توانیم صادرات خود را در اینجا تغییر دهیم،

93
00:07:13,640 --> 00:07:20,430
ما دیگر نیازی به صادرات محصولات در فایل admin.js خود نداریم زیرا دیگر آن آرایه را در اینجا نداریم.

94
00:07:20,480 --> 00:07:26,260
بنابراین در عوض من فقط روتر خود را دوباره صادر می کنم همانطور که این کار را در فایل shop.js انجام می دهم.

95
00:07:26,330 --> 00:07:30,340
بنابراین با صادرات ماژول برابر با روتر، این چیزی است که ما در اینجا نیز داریم

96
00:07:30,500 --> 00:07:37,490
و این فقط به این معنی است که ما اکنون باید فایل app.js را در جایی که این را وارد می کنیم تنظیم کنیم، در آنجا من وارد می کنم

97
00:07:37,580 --> 00:07:39,130
داده های مدیریت، در حال حاضر

98
00:07:39,140 --> 00:07:44,600
نام مناسب‌تر دوباره مسیرهای مدیریت است، زیرا اکنون ما فقط مسیرها را صادر می‌کنیم و هیچ چیز دیگری

99
00:07:44,600 --> 00:07:51,560
و البته این بدان معناست که در اینجا که از آن استفاده می کنیم، فقط از مسیرهای مدیریت استفاده می کنیم زیرا تغییر می کنیم

100
00:07:51,570 --> 00:07:54,010
آن صادرات باشه خوبه

101
00:07:54,050 --> 00:07:56,090
بنابراین ما این تنظیم را انجام می دهیم،

102
00:07:56,090 --> 00:07:59,200
حالا بیایید همین کار را برای shop.js نیز انجام دهیم.

103
00:07:59,400 --> 00:08:02,750
در آنجا تابعی نیز دریافت می کنم که مربوط به محصولات است،

104
00:08:02,750 --> 00:08:03,930
پس بیایید آن را قطع کنیم

105
00:08:04,160 --> 00:08:05,850
و در products.js اینجا،

106
00:08:06,110 --> 00:08:14,830
من یک صادرات جدید اضافه می کنم، صادرات محصولاتی مانند این را دریافت می کند.

107
00:08:14,970 --> 00:08:22,780
اگر این کار را انجام دهم، تابع خود را در اینجا دارم که در پایان آن صفحه را با محصولات من برمی گرداند یا رندر می کند

108
00:08:22,840 --> 00:08:29,240
و یک نکته مهم، بدیهی است که محصولات اکنون یک آرایه است که در آن فایل موجود است،

109
00:08:29,260 --> 00:08:32,700
بنابراین محصولات اینجا لازم نیست از جایی استخراج شوند

110
00:08:32,710 --> 00:08:35,530
و دوباره این را تغییر خواهیم داد.

111
00:08:35,630 --> 00:08:37,640
بنابراین این اکنون محصولات تمام شده من است

112
00:08:37,640 --> 00:08:39,700
کنترلر در shop.js،

113
00:08:39,800 --> 00:08:44,680
اکنون می توانیم این دو واردات را حذف کنیم زیرا دیگر به آنها نیاز نداریم

114
00:08:44,900 --> 00:08:53,510
در عوض، کنترل کننده محصولات خود را با درخواست از همان مسیری که در فایل admin.js وجود دارد، وارد می کنم

115
00:08:53,990 --> 00:09:01,470
و در اینجا برای این مسیر دریافت، من به سادگی می گویم کنترل کننده محصولات محصولات را دریافت می کند. با این همه،

116
00:09:01,470 --> 00:09:04,170
بیایید این را ذخیره کنیم و ببینیم که آیا هنوز کار می کند یا خیر.

117
00:09:04,170 --> 00:09:07,620
اگر این صفحه را دوباره بارگذاری کنم، به نظر می رسد که همه اینها کار می کند

118
00:09:07,860 --> 00:09:11,420
و اگر اولین کتابم را اینجا اضافه کنم، این نیز کار می کند.

119
00:09:11,490 --> 00:09:15,660
بنابراین همچنان مانند قبل کار می کند اما اکنون از یک کنترلر استفاده می کنیم.

120
00:09:15,690 --> 00:09:18,520
حالا بیایید ببینیم در اینجا چه کارهای دیگری می توانیم انجام دهیم.