1
00:00:02,340 --> 00:00:06,460
ما اکنون روی سبد خرید کار می کنیم و در حال حاضر، گاری نداریم،

2
00:00:06,480 --> 00:00:08,310
ما یک محصول داریم اما یک سبد خرید نداریم،

3
00:00:08,580 --> 00:00:11,920
بیایید یک مدل جدید به اینجا اضافه کنیم، فایل cart.js

4
00:00:11,970 --> 00:00:19,050
زیرا می توان گفت که سبد خرید مانند یک موجودیت جداگانه در پروژه ما است. بنابراین من دوباره صادرات

5
00:00:19,080 --> 00:00:21,540
یک کلاس در اینجا و من آن سبد خرید کلاس را نام می برم،

6
00:00:21,600 --> 00:00:26,740
به طوری که بسیار شبیه به کاری است که من در محصول انجام می دهم، آنجا محصول کلاس را صادر می کنم

7
00:00:26,750 --> 00:00:29,370
اما الان سبد خرید کلاس است

8
00:00:29,690 --> 00:00:33,080
و اکنون باید به این فکر کنیم که چگونه می خواهیم آن گاری را مدیریت کنیم.

9
00:00:33,080 --> 00:00:39,220
اکنون بدیهی است که می‌خواهیم سبد خریدی داشته باشیم که همه محصولاتی را که اضافه کرده‌ایم در خود جای دهد

10
00:00:39,280 --> 00:00:44,630
و همچنین می خواهیم محصولات را بر اساس شناسه گروه بندی کنیم و در صورت اضافه کردن محصول بیشتر، تعداد آنها را افزایش دهیم

11
00:00:44,630 --> 00:00:45,980
بیش از یک بار

12
00:00:46,010 --> 00:00:55,000
بنابراین برای انجام همه این کارها، ابتدا یک سازنده در اینجا ایجاد می کنم که به ما امکان می دهد یک سبد خرید جدید ایجاد کنیم.

13
00:00:55,020 --> 00:01:02,810
اکنون وقتی این سبد خرید ایجاد شد، یک ویژگی محصولات را در اینجا اضافه می کنم که باید یک آرایه باشد

14
00:01:02,940 --> 00:01:09,120
و در آنجا تصور می کنم که برخی از اشیاء در آنجا وجود دارند که ممکن است اطلاعاتی مانند شناسه و مهم را در خود جای دهند،

15
00:01:09,270 --> 00:01:12,150
همچنین مقدار این محصول

16
00:01:12,180 --> 00:01:18,210
همچنین می توانیم اطلاعاتی مانند قیمت کل که در ابتدا صفر است اضافه کنیم و البته این افزایش می یابد

17
00:01:18,210 --> 00:01:21,190
با هر محصولی که اضافه می کنیم

18
00:01:21,300 --> 00:01:27,840
اکنون آنچه در این سبد خرید نیاز داریم راهی برای افزودن و حذف محصولاتمان است

19
00:01:27,850 --> 00:01:36,050
به طور مشخص. اکنون مشکلی که ما داریم این است که خود گاری واقعاً شیئی نیست که دائماً آن را بازسازی کنیم،

20
00:01:36,380 --> 00:01:42,200
برای هر محصول جدیدی که اضافه می کنیم نمی خواهیم یک سبد خرید جدید داشته باشیم، در عوض همیشه وجود خواهد داشت

21
00:01:42,200 --> 00:01:48,160
یک سبد خرید در برنامه ما است و ما فقط می خواهیم محصولات را در آنجا مدیریت کنیم. بنابراین رویکرد

22
00:01:48,180 --> 00:01:50,560
من می خواهم بگیرم در واقع یک متفاوت خواهد بود،

23
00:01:50,610 --> 00:01:57,300
من واقعاً سازنده ای اضافه نمی کنم به جای آن یک روش استاتیک اضافه می کنم، محصولی مانند این را اضافه می کنم.

24
00:01:57,300 --> 00:02:04,440
اکنون این شناسه محصولی را که می‌خواهم اضافه کنم می‌گیرد و هدف در اینجا واکشی آن خواهد بود

25
00:02:05,160 --> 00:02:13,650
سبد خرید قدیمی یا قبلی از فایل ما در حال حاضر، آن را تجزیه و تحلیل کنید و ببینید آیا قبلا آن محصول را داریم،

26
00:02:15,040 --> 00:02:27,100
محصول موجود را پیدا کنید و سپس محصول جدید اضافه کنید یا مقدار را افزایش دهید. این چیزی است که من قصد انجام آن را دارم،

27
00:02:27,150 --> 00:02:30,550
پس بیایید با اضافه کردن منطق واکشی یک سبد خرید از یک فایل شروع کنیم.

28
00:02:30,780 --> 00:02:33,920
برای این من فایل سیستم را اینجا وارد می کنم

29
00:02:34,230 --> 00:02:38,310
و همچنین راهنما در اینجا،

30
00:02:38,460 --> 00:02:39,010
اوه، مسیر

31
00:02:39,010 --> 00:02:45,310
برای ساختن یک مسیر خوب اکنون در product.js، می بینیم که آن مسیر چگونه باید ساخته شود تا بتوانیم آن را کپی کنیم

32
00:02:45,310 --> 00:02:50,990
که در اصل، به محصولات، به cart.js بروید و سپس آن را در اینجا اضافه کنید.

33
00:02:51,010 --> 00:02:54,650
حالا تفاوت این است که نام فایل cart.json خواهد بود

34
00:02:54,700 --> 00:03:01,840
و در آنجا ما یک شی که نشان دهنده سبد خرید ما است و سپس اینجا، در این قسمت اینجا برای افزودن ذخیره می کنیم

35
00:03:01,840 --> 00:03:08,680
یک محصول، من می خواهم از سیستم فایل برای خواندن یک فایل استفاده کنم و آن فایل در این مسیر خواهد بود

36
00:03:08,680 --> 00:03:15,400
فایل cart.json من است و ما یک callback داریم که در آن یا خطا می‌گیرم یا محتوای فایل.

37
00:03:15,400 --> 00:03:16,440
حالا اگر خطایی داشتیم،

38
00:03:16,450 --> 00:03:20,320
ما می دانیم که فایل هنوز وجود ندارد و بنابراین هنوز سبد خرید نداریم.

39
00:03:20,320 --> 00:03:25,940
بنابراین اگر خطایی دریافت کردیم، سبد خرید ما باید در غیر این صورت ایجاد شود

40
00:03:25,960 --> 00:03:31,160
ما می دانیم که به خوبی یک سبد خرید موجود را دریافت می کنیم.

41
00:03:31,240 --> 00:03:32,680
بنابراین در اینجا من یک سبد خرید جدید اضافه می کنم

42
00:03:32,680 --> 00:03:38,290
اول از همه که محصولاتی خواهد داشت که یک آرایه خالی هستند و شاید آن مقدار کل ما باشد

43
00:03:38,290 --> 00:03:42,250
صحبت کردن در مورد، قیمت کل ببخشید که صفر است.

44
00:03:42,790 --> 00:03:47,770
و بنابراین اگر خطایی نداشته باشیم، باز هم منطق معکوس، اگر خطا نداشته باشیم

45
00:03:47,950 --> 00:03:50,620
سپس می دانیم که یک سبد خرید موجود داریم،

46
00:03:50,620 --> 00:03:57,810
بنابراین در این حالت سبد خرید من باید برابر با محتوای فایل تجزیه شده باشد. ما آن را به عنوان json ذخیره می کنیم تا من ذخیره کنم

47
00:03:57,850 --> 00:04:00,490
آن را با آن کمک کننده json تجزیه کنید.

48
00:04:00,490 --> 00:04:06,160
بنابراین اکنون در این مرحله بعد از عبارت if، می دانیم که یک سبد خرید خواهیم داشت و اکنون می توانیم تجزیه و تحلیل کنیم

49
00:04:06,160 --> 00:04:08,410
آن و اضافه کردن یک محصول،

50
00:04:08,440 --> 00:04:13,270
بنابراین بیایید سبد خرید را تجزیه و تحلیل کنیم و ببینیم آیا محصولی که می‌خواهیم اضافه کنیم وجود دارد یا خیر.

51
00:04:13,270 --> 00:04:19,420
بنابراین ما با بردن محصولات سبد خرید خود در آنجا، محصول موجود را جستجو خواهیم کرد.

52
00:04:19,420 --> 00:04:22,180
به یاد داشته باشید ما محصولاتی را در سبد خرید خواهیم داشت که یک آرایه است

53
00:04:22,600 --> 00:04:25,640
و سپس عنصری را در آنجا پیدا کنید.

54
00:04:25,660 --> 00:04:29,860
بنابراین دوباره همه محصولات را مرور می کنیم و نگاهی به هر یک از آنها، هر محصول خواهیم انداخت،

55
00:04:29,950 --> 00:04:36,130
بنابراین در هر محصول نگاهی خواهیم داشت و خواهیم دید که آیا شناسه محصول با شناسه محصولی که امتحان می کنیم مطابقت دارد یا خیر

56
00:04:36,130 --> 00:04:37,450
برای اضافه کردن.

57
00:04:37,510 --> 00:04:43,090
حالا اگر ما قبلاً یک محصول موجود داشته باشیم، می‌خواهیم آن مقدار را افزایش دهیم.

58
00:04:43,360 --> 00:04:49,900
بنابراین بیایید فرض کنیم که هر شی محصولی که در آنجا ذخیره می شود فقط یک شی محصول نیست

59
00:04:50,110 --> 00:04:57,280
داشتن داده ها در مدل محصول ما، بلکه دارای یک فیلد کمیت اضافی است.

60
00:04:57,280 --> 00:05:02,950
حالا اگر یک محصول موجود داریم، پس من می خواهم یک محصول جدید ایجاد کنم و برای این کار یک متغیر جدید ایجاد می کنم،

61
00:05:04,300 --> 00:05:06,430
محصول به روز شده

62
00:05:06,670 --> 00:05:11,620
و در اینجا در این عبارت if، بنابراین اگر یک محصول موجود داریم، از محصول به روز شده استفاده می کنم

63
00:05:11,700 --> 00:05:15,930
و اکنون جاوا اسکریپت نسل بعدی با عملگر شی گسترش،

64
00:05:16,240 --> 00:05:22,300
من تمام ویژگی های محصول موجود را می گیرم و آنها را به یک شی جاوا اسکریپت جدید اضافه می کنم

65
00:05:22,750 --> 00:05:30,880
و سپس روی آن محصول به روز شده، مقدار را برابر با مقدار قدیمی به اضافه یک تنظیم می کنم.

66
00:05:31,000 --> 00:05:33,780
بنابراین من به سادگی مقدار را یک بار افزایش می دهم

67
00:05:33,820 --> 00:05:39,430
و از آنجایی که من تمام خواص محصول موجود را در محصول به روز شده توزیع کردم، مقدار آن خواهد بود

68
00:05:39,430 --> 00:05:44,010
قبلاً در آنجا موجود است زیرا در محصول موجود موجود بود.

69
00:05:44,020 --> 00:05:48,490
حالا اگر محصول جدیدی داشته باشیم، محصول به روز شده را برابر با تنظیم می کنم

70
00:05:48,730 --> 00:05:53,210
و من باید آن را در یک بلوک دیگری قرار دهم،

71
00:05:53,310 --> 00:05:56,700
بنابراین اگر ما یک محصول جدید داشته باشیم، من محصول به روز شده را برابر با

72
00:05:59,600 --> 00:06:06,750
یک شیء جدید جاوا اسکریپت که در آن اطلاعاتی را برای آن محصول اضافه می‌کنم و مثلاً شناسه من خواهد بود.

73
00:06:06,950 --> 00:06:12,950
بنابراین ID برابر با شناسه ای است که به عنوان آرگومان دریافت می کنم و مقدار را روی یک تنظیم می کنم زیرا

74
00:06:12,950 --> 00:06:19,730
فقط یکی اضافه کردیم حالا چیزی که باقی می ماند این است که می خواهم قیمت سبد را به روز کنم.

75
00:06:19,740 --> 00:06:26,250
اکنون ما سبد خرید را در اینجا با قیمت کل دریافت کردیم و قیمت کل همیشه با قیمت افزایش می یابد

76
00:06:26,250 --> 00:06:27,870
محصولی که اضافه کردیم

77
00:06:28,260 --> 00:06:31,010
حالا من آن اطلاعات را در اینجا ندارم،

78
00:06:31,260 --> 00:06:40,140
بنابراین من انتظار دارم که آن را به عنوان استدلال، قیمت محصول دریافت کنم و بنابراین در اینجا بعد از این اگر مسدود شود، می توانم بگویم سبد خرید

79
00:06:40,290 --> 00:06:46,620
قیمت کل برابر است با قیمت کل سبد خرید به اضافه قیمت محصول درست به این دلیل که ما می خواهیم، ​​قیمت زیرا ما

80
00:06:46,620 --> 00:06:48,070
می خواهند آن را افزایش دهند.

81
00:06:48,270 --> 00:06:52,220
بنابراین اکنون ما محصول خود را اضافه کردیم،

82
00:06:52,390 --> 00:06:53,520
پیداکردیم

83
00:06:53,670 --> 00:06:59,100
و ما نیز آن را تجزیه و تحلیل کردیم و یک محصول جدید اضافه کردیم، مقدار را افزایش دادیم،

84
00:06:59,100 --> 00:07:09,480
اکنون فقط باید سبد خرید را به فایل خود ذخیره کنیم. و البته در حال حاضر سبد خرید نیز باید شامل

85
00:07:09,480 --> 00:07:12,000
محصول به روز شده، این نیز مهم است.

86
00:07:12,090 --> 00:07:13,720
بنابراین ما قیمت را تا کنون به روز کردیم،

87
00:07:13,720 --> 00:07:15,630
بیایید اکنون محصولات را نیز به روز کنیم،

88
00:07:15,630 --> 00:07:19,300
بنابراین محصولات موجود در سبد خرید ما باید برابر با محصولات قدیمی باشد

89
00:07:19,320 --> 00:07:22,260
و در اینجا دوباره از یک ویژگی جاوا اسکریپت نسل بعدی استفاده خواهم کرد

90
00:07:22,260 --> 00:07:25,850
با گسترش محصولات موجود سبد خرید،

91
00:07:26,040 --> 00:07:29,770
بنابراین این اکنون یک آرایه با تمام محصولات سبد خرید قدیمی خواهد بود

92
00:07:29,980 --> 00:07:33,260
و حالا سوال این است که من می خواهم چه کار کنم؟

93
00:07:33,630 --> 00:07:36,690
خوب اگر برای اولین بار محصولی ایجاد می کنیم،

94
00:07:36,720 --> 00:07:43,600
بنابراین اگر من در این بلوک else باشم، به سادگی محصول به روز شده را به عنوان یک محصول اضافی جدید اضافه می کنم.

95
00:07:43,600 --> 00:07:48,660
با این حال، اگر یک محصول موجود در اینجا دریافت کنم، نمی‌خواهم محصول جدیدی اضافه کنم

96
00:07:48,660 --> 00:07:56,850
در عوض می‌خواهم نسخه قدیمی را جایگزین کنم و برای انجام این کار، باید بفهمم این محصول در کجای محصولات قدیمی من است

97
00:07:56,970 --> 00:07:58,770
محصول موجود قرار گرفت،

98
00:07:58,770 --> 00:08:05,170
پس کدام موقعیت را داشت. برای انجام این کار، به جای محصول، شاخص را دریافت می کنم،

99
00:08:05,220 --> 00:08:12,690
بنابراین در اینجا من شاخص محصول موجود را خواهم داشت و سپس محصول موجود خود را که به سادگی سبد خرید است اضافه می کنم

100
00:08:12,780 --> 00:08:16,620
محصولات در این شاخص محصول موجود،

101
00:08:16,620 --> 00:08:17,950
بنابراین یک مرحله اضافی

102
00:08:18,060 --> 00:08:24,080
اما این اکنون به من اجازه می دهد تا از آن شاخص برای جایگزینی مورد موجود در محصولات سبد خرید ما در اینجا استفاده کنم.

103
00:08:24,540 --> 00:08:32,310
بنابراین در آنجا، من محصولات سبد خرید را برابر با محصول سبد خرید قرار می دهم،

104
00:08:32,310 --> 00:08:38,950
بنابراین قبل از هر چیز آرایه قدیمی را همانطور که در آنجا انجام می دهیم کپی کنید

105
00:08:39,160 --> 00:08:42,720
اما در عوض، محصولات به روز شده را اضافه نمی کنم

106
00:08:44,940 --> 00:08:53,040
من محصولات سبد خرید را تنظیم می کنم و فهرست محصولات موجود را بازنویسی می کنم، بنابراین در این موقعیت جایگزین خواهم کرد

107
00:08:53,040 --> 00:08:55,670
عنصر با محصول به روز شده من.

108
00:08:55,670 --> 00:09:01,900
بنابراین اکنون محصول به روز شده یا جایگزین می شود یا به محصولات سبد خرید اضافه می شود و قیمت به روز می شود.

109
00:09:02,040 --> 00:09:09,310
حالا می‌توانیم آن را ذخیره کنیم و برای این کار، می‌توانیم از فایل نوشتن فایل سیستم استفاده کرده و آن را در آن مسیر بنویسیم

110
00:09:09,750 --> 00:09:15,160
و البته همچنین آنچه را که می خواهیم در آنجا قرار دهیم را تعریف کنیم

111
00:09:15,210 --> 00:09:17,550
و من می خواهم سبد خریدم را در مسیر بنویسم،

112
00:09:20,100 --> 00:09:23,010
بدیهی است در یک رشته

113
00:09:23,010 --> 00:09:25,020
نسخه، به عنوان json

114
00:09:25,110 --> 00:09:30,300
و سپس در اینجا من یک callback دارم که در آن ممکن است یک خطا دریافت کنم که می خواهم آن را خروجی کنم تا ببینم آیا می توانم یا نه

115
00:09:30,300 --> 00:09:31,820
آیا یکی دارید و کدام است

116
00:09:31,830 --> 00:09:35,330
اگر یکی را گرفتم و سپس کارم تمام شد.

117
00:09:35,340 --> 00:09:39,690
بنابراین این اکنون یک روش افزودن محصول است که امیدواریم این کار را انجام دهد،

118
00:09:39,870 --> 00:09:41,520
به سادگی آن را امتحان کنیم

119
00:09:41,760 --> 00:09:44,340
بنابراین برای این، اجازه دهید به کنترل کننده فروشگاه برویم

120
00:09:44,490 --> 00:09:47,610
و در سبد خرید، می خواهم محصول خود را اضافه کنم.

121
00:09:47,820 --> 00:09:52,720
البته این بدان معناست که در اینجا اول از همه باید محصول را تهیه کنم زیرا به قیمت آن نیز نیاز دارم.

122
00:09:52,920 --> 00:10:01,230
بنابراین من برای شناسه محصول خود از پیدا کردن محصول توسط شناسه استفاده خواهم کرد و سپس از جایی که محصول خود را دریافت می کنم، این تماس را دریافت می کنم.

123
00:10:01,230 --> 00:10:06,660
بنابراین در اینجا محصولی است که از پایگاه داده محصولات بازیابی می شود، به اصطلاح، از محصولات

124
00:10:06,660 --> 00:10:07,470
فایل

125
00:10:07,800 --> 00:10:11,880
و وقتی این را داشتم، می‌توانم از اطلاعات محصول برای به‌روزرسانی سبد خریدم استفاده کنم.

126
00:10:12,180 --> 00:10:15,140
بنابراین در اینجا، اکنون می خواهم از مدل سبد خریدم استفاده کنم.

127
00:10:15,390 --> 00:10:21,930
اول از همه، بیایید آن را وارد کنیم، سبد خرید با درخواست آن از پوشه مدل ها و آنجا از سبد خرید

128
00:10:21,960 --> 00:10:31,430
پوشه و با وارد شدن آن، بیایید به پست سبد خرید برویم و بگوییم سبد خرید افزودن محصول و اکنون سبد خرید

129
00:10:31,470 --> 00:10:38,190
این مدل اساساً به عنوان یک مدل کاربردی عمل می کند، می توانید بگویید، ما آن را نمونه سازی نمی کنیم

130
00:10:38,220 --> 00:10:46,200
در عوض از این تابع استاتیک استفاده می‌کردم و از افزودن محصول برای ارسال شناسه محصول خود و همچنین my, here استفاده می‌کنم

131
00:10:46,460 --> 00:10:47,030
تولید - محصول

132
00:10:47,040 --> 00:10:53,700
این همان چیزی است که من از فایل محصول بازیابی می کنم، قیمت محصول من، زیرا این نیز اطلاعاتی است که

133
00:10:53,700 --> 00:10:54,680
من در آنجا نیاز دارم

134
00:10:56,540 --> 00:11:03,000
با این کار، بیایید با بازگشت به برنامه ما در اینجا و کلیک کردن روی افزودن به سبد خرید، ببینیم که آیا کار می کند،

135
00:11:03,220 --> 00:11:08,330
اکنون خوب به نظر می رسد زیرا ما خطا را در اینجا ثبت می کنیم و اگر null را می بینیم به این معنی است که هیچ خطایی وجود ندارد

136
00:11:08,560 --> 00:11:15,500
و اکنون ما cart.json را دریافت کردیم و در آنجا، محصولاتی را دریافت کردم که مجموعه ای از محصولات با یک شناسه و مقدار است.

137
00:11:16,340 --> 00:11:21,290
و قیمت به عنوان یک رشته ذخیره می شود که در اینجا باید بگویم کمی کمتر از حد مطلوب است، بنابراین ما باید

138
00:11:21,290 --> 00:11:22,440
روی آن کار کنید

139
00:11:22,610 --> 00:11:24,810
اما علاوه بر آن، این به نظر خوب است.

140
00:11:24,920 --> 00:11:32,300
حالا اگر محصول دیگری یا همان محصول را دوباره اضافه کنم، می بینیم که مقدار آن افزایش یافته است.

141
00:11:32,390 --> 00:11:37,180
قیمت بد رفتار می کند زیرا به عنوان یک رشته ذخیره می شود و بنابراین به هم پیوسته است.

142
00:11:37,400 --> 00:11:43,720
بنابراین ما باید کاری در مورد آن انجام دهیم. در cart.js قیمتی که ما استخراج می کنیم، به عنوان یک رشته ذخیره می شود

143
00:11:43,730 --> 00:11:45,770
در مدل محصول ما،

144
00:11:45,770 --> 00:11:49,010
بنابراین وقتی روی قیمت کار می کنیم، کاری که باید انجام دهیم اینجاست،

145
00:11:51,830 --> 00:11:57,030
برای تبدیل آن رشته به عدد باید جلوی قیمت محصول یک پلاس اضافه کنم

146
00:11:57,350 --> 00:12:05,080
و حالا اگر سریعا cart.json را حذف کنیم تا از صفر شروع کنیم و دوباره عنصرم را به سبد خرید اضافه کنم

147
00:12:06,570 --> 00:12:09,310
و من دوباره این کار را انجام می دهم و اکنون به بررسی cart.json می پردازیم،

148
00:12:09,330 --> 00:12:12,350
اکنون این بهتر به نظر می رسد.

149
00:12:12,420 --> 00:12:15,410
بنابراین این اکنون کار می کند، این مدل سبد خرید ما اضافه شده است

150
00:12:15,570 --> 00:12:22,830
اما با آن اجازه دهید به موضوع مسیریابی خود که در این ماژول داشتیم برگردیم و ببینیم چه پرس و جوی

151
00:12:22,830 --> 00:12:27,180
پارامترها هستند و چگونه می توانند به ما در ویرایش یک محصول کمک کنند.