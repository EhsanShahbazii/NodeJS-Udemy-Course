1
00:00:02,180 --> 00:00:05,500
ما کمی روی مدل سبد خرید کار کردیم، برخی چیزها هنوز گم شده است

2
00:00:05,500 --> 00:00:12,670
به عنوان مثال، ما هرگز سبد خرید خود را نمایش نمی دهیم و همچنین هرگز واقعاً نمی توانیم یک مورد را از آن حذف کنیم

3
00:00:12,670 --> 00:00:15,510
سبد خرید اما بیایید فعلاً آن را نادیده بگیریم،

4
00:00:15,610 --> 00:00:19,240
اجازه دهید در عوض بر روی ویرایش یک محصول تمرکز کنیم.

5
00:00:19,240 --> 00:00:24,790
ما فایل ویرایش محصول ejs را داریم و در پایان کاری که می خواهم در آنجا انجام دهم این است که می خواهم رندر کنم

6
00:00:24,790 --> 00:00:28,050
همان فرمی که برای افزودن محصول دارم،

7
00:00:28,120 --> 00:00:34,840
تفاوت این خواهد بود که من می خواهم آن فرم را با مقادیر محصول مورد نظرم از قبل پر کنم

8
00:00:34,840 --> 00:00:36,390
برای ویرایش

9
00:00:36,400 --> 00:00:45,070
حالا اگر در نهایت از همان کد html استفاده کنم، منطقی است که از همان قالب دوباره استفاده کنم. اگر شما

10
00:00:45,070 --> 00:00:48,750
تا به حال برای استفاده از یکی دیگر برنامه ریزی کرده اید، اینطور نیست، اما اینجا منطقی است.

11
00:00:49,090 --> 00:00:54,910
بنابراین کاری که من انجام خواهم داد این است که کد add product.ejs خود را می گیرم و آن را به ویرایش محصول منتقل می کنم زیرا پیدا کردم

12
00:00:54,940 --> 00:00:59,580
این نام عمومی تر باشد و فایل add product.ejs را حذف می کنم،

13
00:00:59,720 --> 00:01:04,940
بنابراین اکنون ما فقط edit producte.ejs را با تمام کدهای html که نیاز داریم در آنجا داریم.

14
00:01:05,280 --> 00:01:10,450
حالا اول از همه، یعنی باید آن فایل را در admin.js بارگذاری کنم

15
00:01:10,460 --> 00:01:20,950
وقتی دریافت محصول را بارگیری می کنیم، دیگر به مسیر افزودن محصول در اینجا نیازی ندارم، فقط به ویرایش محصول در اینجا نیاز دارم،

16
00:01:21,100 --> 00:01:27,130
قسمت پایین می‌تواند محصول را اضافه کند زیرا این همان چیزی است که ما برای برجسته کردن یک پیمایش خاص استفاده می‌کنیم

17
00:01:27,220 --> 00:01:33,160
مورد به هر حال ما می توانیم از شر این اطلاعات اضافی خلاص شویم.

18
00:01:33,730 --> 00:01:37,300
بنابراین، اگر روی افزودن محصول کلیک کنم، باید همچنان کار کند

19
00:01:37,300 --> 00:01:39,260
من هنوز آن فرم را می بینم،

20
00:01:39,280 --> 00:01:40,590
بنابراین به نظر خوب است.

21
00:01:40,990 --> 00:01:47,980
با این حال، برای ویرایش یک محصول، من هم اکنون می خواهم یک مسیر داشته باشم و می خواهم از همان نمای استفاده کنم، بنابراین

22
00:01:47,980 --> 00:01:50,140
من آن مسیر را کپی می کنم

23
00:01:50,140 --> 00:01:55,390
اینجا و اضافه کنید شاید در زیر پست محصول را اضافه کنید تا این دو با هم حفظ شوند

24
00:01:56,180 --> 00:02:04,780
و در اینجا من دریافت محصول ویرایش را به عنوان نام اقدام خواهم داشت و همچنین می خواهم ویرایش محصول را در اینجا رندر کنم.

25
00:02:04,840 --> 00:02:10,570
تفاوت این است که من در اینجا قصد دارم اطلاعات محصول خود را منتقل کنم

26
00:02:10,570 --> 00:02:14,850
اما مشکل این است که البته چگونه باید به این عمل کنترلر برسم

27
00:02:15,130 --> 00:02:19,240
و ایده من این است که از آنجایی که من قبلاً دکمه ویرایش خود را اینجا دارم،

28
00:02:19,420 --> 00:02:24,050
اگر روی آن کلیک کنم که نمی‌خواهم ویرایش محصول را به این شکل صدا کنم،

29
00:02:24,070 --> 00:02:26,920
همچنین می خواهم شناسه محصولی را که می خواهم ویرایش کنم اضافه کنم.

30
00:02:27,010 --> 00:02:31,330
بنابراین، اگر من یک شناسه واقعی از فایل products.json خود بگیرم مانند این،

31
00:02:31,660 --> 00:02:33,460
سپس من آن را در آدرس اینترنتی داشته باشم

32
00:02:33,610 --> 00:02:39,340
و اگر من این را بارگذاری کنم، اکنون می‌خواهم فرم از قبل با داده‌های این محصول پر شده باشد و اگر من

33
00:02:39,520 --> 00:02:46,370
دکمه ذخیره را فشار دهید، البته من نمی خواهم این محصول را ایجاد کنم، بلکه به سادگی محصول موجود را ویرایش کنم. اکنون

34
00:02:46,460 --> 00:02:49,820
این بدان معنی است که من به دو چیز نیاز دارم،

35
00:02:49,850 --> 00:02:58,250
شناسه ای که باید آن را منتقل کنم و اطلاعاتی که می خواهم به جای ایجاد یک محصول، آن را ویرایش کنم.

36
00:02:58,250 --> 00:03:02,830
خوب اگر به مسیرهای مدیریت خود برویم، می توانیم یک مسیر جدید اضافه کنیم

37
00:03:02,840 --> 00:03:08,510
اول از همه، این مسیر محصول را در اینجا با شناسه ویرایش کنید و یاد گرفتید که واقعاً چگونه کار می کند، شما

38
00:03:08,510 --> 00:03:11,830
می توانید یک مسیر جدید در اینجا اضافه کنید، مسیر را دریافت کنید

39
00:03:12,050 --> 00:03:19,110
به صورت اسلش خواهد بود و سپس در اینجا، /admin برای همه مسیرهای موجود در فایل admin.js موجود است.

40
00:03:19,120 --> 00:03:22,650
به هر حال همانطور که می دانید، بنابراین فقط محصول را ویرایش کنید

41
00:03:22,700 --> 00:03:25,900
و سپس ID و دوباره این یک متغیر است،

42
00:03:25,930 --> 00:03:33,710
یک قطعه مسیر پویا که با دو نقطه نشان داده شده است. و سپس می‌توانیم کنترل‌کننده مدیریت را بارگیری کنیم و آن را دریافت کنیم

43
00:03:34,610 --> 00:03:35,710
ویرایش محصول

44
00:03:35,740 --> 00:03:37,260
اقدامی که به تازگی اضافه کردیم.

45
00:03:37,730 --> 00:03:39,320
بنابراین این مرحله شماره یک است

46
00:03:39,500 --> 00:03:45,300
و در واقع، اکنون می توانیم به کنترلر admin.js خود برویم

47
00:03:45,530 --> 00:03:49,210
و در اینجا به وضوح می دانیم که می خواهیم یک محصول را ویرایش کنیم.

48
00:03:49,220 --> 00:03:57,530
بنابراین کاری که می‌توانیم انجام دهیم این است که می‌توانیم یک فیلد اطلاعات اضافی را به ویرایش نمای خود منتقل کنیم و آن را روی true تنظیم کنیم

49
00:03:57,560 --> 00:04:01,040
شاید تا بتوانیم این را با شرط if بررسی کنیم تا متوجه شویم

50
00:04:01,130 --> 00:04:07,070
برای مثال اگر با کلیک بر روی دکمه ذخیره، باید سعی کنیم محصول را اضافه کنیم و درخواستی به آن ارسال کنیم

51
00:04:07,070 --> 00:04:11,020
آن مسیر یا سعی کنید آن را ویرایش کنید و به مسیر دیگری ارسال کنید.

52
00:04:11,210 --> 00:04:19,670
اما بیایید بگوییم که می‌خواهیم با اطمینان از اینکه مردم باید به اصطلاح به ما یک تأییدیه اضافی دریافت کنیم.

53
00:04:19,670 --> 00:04:26,360
پارامتر query در url یک پارامتر query را می توان با اضافه کردن یک علامت سوال به هر URL اضافه کرد

54
00:04:26,360 --> 00:04:31,890
سپس یک جفت مقدار کلیدی که با علامت مساوی از هم جدا می شود، مانند ویرایش برابر با true است

55
00:04:32,180 --> 00:04:36,400
و می توانید چندین پارامتر پرس و جو را با جداسازی و آنها با و درصد داشته باشید،

56
00:04:36,470 --> 00:04:45,050
بنابراین ما همچنین می توانیم عنوان برابر جدید داشته باشیم.

57
00:04:45,060 --> 00:04:46,460
پس این امکان پذیر است

58
00:04:46,830 --> 00:04:49,250
و این به اصطلاح داده اختیاری است،

59
00:04:49,270 --> 00:04:54,930
مسیر در اینجا، مسیری که به آن می رسد توسط قسمت تا علامت سوال تعیین می شود.

60
00:04:55,050 --> 00:04:58,640
بنابراین نیازی به افزودن هیچ اطلاعاتی در مورد پارامترهای پرس و جو ندارید

61
00:04:58,650 --> 00:05:02,960
ممکن است به فایل مسیرهای خود برسید، این مسیرها تحت تأثیر قرار نمی گیرند اما می توانید